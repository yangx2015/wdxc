<template>
  <ui-page>
     <ui-nav-bar slot="nav-bar" custom-style="{{ {'color':'#fff','background-color':'#FC8609'} }}">
        <ui-row height="46">
          <ui-col vertical-align="middle" align="center" width="60" bindtap="Goback">
            <ui-icon type="left" size="16" color="#fff"></ui-icon>
          </ui-col>
          <ui-col vertical-align="middle" align="center">
            <ui-view class="nav_title">我的行程</ui-view>
          </ui-col>
          <ui-col vertical-align="middle" align="center" width="60">
          </ui-col>
        </ui-row>
      </ui-nav-bar>
      <ui-view class="box_col">   
          <ui-divider></ui-divider>
              <ui-tabs index="{{ current2 }}"  bindchange="handleChange($event, 'current2')" ink-bar active-tab-style="{{activeTabStyle}}" ink-bar-style="{{inkBarStyle}}">
                  <ui-tab>待出发</ui-tab>
                  <ui-tab>待派单</ui-tab>
                  <ui-tab>待审核</ui-tab>
                  <ui-tab>被驳回</ui-tab>
                  <ui-tab>历史行程</ui-tab>
              </ui-tabs>
                  <ui-swiper class="box_col_auto"  current="{{ current2 }}" bindchange="handleContentChange($event, 'current2')">
                      <ui-swiper-item>
                          <ui-scroll-view
                          scroll-y
                          height="{{height - imgHeight}}"
                          pull-down="{{ pullDown }}"
                          enable-reach-bottom-load ="{{loadMore}}"
                          on-load-more="{{ handleLoadMore }}">
                            <ui-view class="content_list">
                              <ui-view ui:for="{{ items }}" class="{{{'grey-bg': index % 2 == 0}}}">
                                {{ item }}
                              </ui-view>
                            </ui-view>
                          <ui-view style="width:200px;margin:0 auto;">
                            <ui-divider ui:show="{{!loadMore}}">没有新数据了</ui-divider>
                          </ui-view>
                          </ui-scroll-view>
                      </ui-swiper-item>
                      <ui-swiper-item>
                          内容二
                      </ui-swiper-item>
                      <ui-swiper-item>
                          内容三
                      </ui-swiper-item>
                      <ui-swiper-item>
                          内容四
                      </ui-swiper-item>
                      <ui-swiper-item class="box_col_auto boxSty">
                          <ui-view class="lmw" bindtap="gomark()">
                              <ui-row vertical-align="middle">
                              <ui-col span="8"   style="padding:15px 15px 0 15px">
                                  <ui-view class="pageHeght">
                                      十二座车
                                  </ui-view>
                              </ui-col>
                              <ui-col align="right" spam="3" style="padding:15px 0 0 0;color:#A0A0A0">
                                已完成
                              </ui-col>
                              <ui-col span="1" style="padding:15px 0 0px 0;color:#A0A0A0" align="right" space-right="15">
                                <ui-view class="pingyi">
                                  <ui-icon type="right1" size=5></ui-icon>
                                </ui-view>
                                
                              </ui-col>
                              </ui-row>
                              <ui-row>
                                    <ui-col style="padding:0px 10px 0 15px" span="1">
                                    <ui-icon type="shijianshizhongdaojishi" style="color:#A0A0A0" size=10></ui-icon>
                                    </ui-col>
                                    <ui-col span="11" align="left" style="color:#A0A0A0">
                                      今天 15:10
                                    </ui-col>
                                    </ui-row>
                                    <ui-row >
                                    <ui-col style="padding:5px 15px 0 15px" span="1">
                                    <ui-icon type="yuan-copy-copy-copy-copy" style="color:#00CC99" size=10></ui-icon>
                                    </ui-col>
                                    <ui-col span="11" align="left" style="padding:5px 15px 0 0px;color:#A0A0A0">
                                      武汉大学中国边界和海洋研究院
                                    </ui-col>
                                    </ui-row>
                                    <ui-row >
                                    <ui-col style="padding:0px 15px 0 15px" span="1">
                                    <ui-icon type="yuan-copy-copy-copy-copy" style="color:#FF9966" size=10></ui-icon>
                                    </ui-col>
                                    <ui-col span="11" align="left" style="margin:0px 0px 20px 0px;color:#A0A0A0">
                                      武汉大学二食堂
                                    </ui-col>
                                </ui-row>
                            </ui-view>
                      </ui-swiper-item>
                  </ui-swiper> 
        </ui-view> 
  

















  
  
<!-- <ui-view class="lmw" bindtap="gomark()">


<ui-row vertical-align="middle">
<ui-col span="8"   style="padding:15px 15px 0 15px">
    <ui-view class="pageHeght" >
        十二座车
    </ui-view>
</ui-col>
<ui-col align="right" spam="3" style="padding:15px 0 0 0;color:#A0A0A0">
  已取消
</ui-col>
<ui-col span="1" style="padding:15px 0 0px 0;color:#A0A0A0" align="right" space-right="15">
  <ui-view class="pingyi">
    <ui-icon type="right1" size=5></ui-icon>
  </ui-view>
  
</ui-col>
</ui-row>



<ui-row>
<ui-col style="padding:0px 10px 0 15px" span="1">
 <ui-icon type="shijianshizhongdaojishi" style="color:#A0A0A0" size=10></ui-icon>
</ui-col>
<ui-col span="11" align="left" style="color:#A0A0A0">
  今天 15:10
</ui-col>
</ui-row>


<ui-row >
<ui-col style="padding:5px 15px 0 15px" span="1">
 <ui-icon type="yuan-copy-copy-copy-copy" style="color:#00CC99" size=10></ui-icon>
</ui-col>
<ui-col span="11" align="left" style="padding:5px 15px 0 0px;color:#A0A0A0">
  武汉大学中国边界和海洋研究院
</ui-col>
</ui-row>

<ui-row >
<ui-col style="padding:0px 15px 0 15px" span="1">
 <ui-icon type="yuan-copy-copy-copy-copy" style="color:#FF9966" size=10></ui-icon>
</ui-col>
<ui-col span="11" align="left" style="margin:0px 0px 20px 0px;color:#A0A0A0">
   武汉大学二食堂
</ui-col>
</ui-row>








</ui-view> -->








    

    
   
    






  </ui-page>
  
</template>

<script>
export default {
  config: {
    
    disableScroll:true,
    
  },
  data () {
    return {
      items: [],
        bottom: 30,
        height: ui.DEFAULT_CONTENT_HEIGHT,
        imgHeight: parseInt(ui.WIN_WIDTH / 1125 * 628),
        pullDown: {
          distance: 50,
          onBegin: () => {},
          onActive: this.handleActive,
          onAfter: this.handlePullDownAfter
        },
        count:0,
        loadMore:true,
      current2: 0,
      activeTabStyle:{
        'color': '#e60012',
      },
      inkBarStyle:{
        'border-bottom': '1px solid red',
        'width': '60%',
        'color':'red'
      },
      current9:0,
      activeTabStyle2:{
       'color':'#FF9966',
       'border-bottom':'1px solid #FF9966',
      },
    }
         
  },
      

  methods: {
     Goback(){
      ui.navigateBack()
    },
    handleChange(index,key){
      this[key]=index
    },
    handleContentChange(index,key){
      this[key]=index
    },
    gomark(){
       ui.navigateTo({
        url: '/pages/mark'
      })
    },
    handleLoadMore () {
        this.count ++
        if(this.count > 2){
          this.loadMore = false
          return false
        }else{
          window.setTimeout(() => {
            for (let i = this.bottom + 1; i <= this.bottom + 10; i++) {
              this.items.push(`列表项目${i}`)
            }
            this.bottom += 10
          }, 1500)
        }
    },
    handleActive () {
        // 将返回的请求接管，实现让请求结果来控制下拉刷新的状态
        return ui.request({
          // promise设置为true，让请求返回promise，这样就可以接管请求
          // 请求结束后页面自动回弹
          promise: true,
          url: '/touchui-backstage/listInfo.do?state=1',
          success: (response) => {
          },
          fail: (err) => {
          }
        })
      },
      // 下拉结束后，执行的函数。因为只要下拉即时没有到达刷新的高度也会触发这个方法
      // flag 为1表示执行了handleActive。为undefined代表handleActive没有执行。
      handlePullDownAfter (flag) {
        if (flag) {
          ui.showToast({
            title: '处理下拉刷新'
          })
        }
      },
   
    
    
    

    
    navHandle () {
      ui.navigateTo({
        url: '/pages/detail'
      })
    }
  },
  mounted() {
    for (let i = 1; i <= this.bottom; i++) {
        this.items.push(`列表项目${i}`)
      }
    //首屏页面需要在mounted中延时才能调用框架api，其他页面不需要延时
    setTimeout(() => {
      //关闭app启动图
      ui.closeSplashscreen()
    }, 1000);
  }
}

</script>

// <style lang="less">
// .lmw{
//   background: #fff;
//   border-radius 5rpx;
//   borde: solid black;
//   margin:0 15px 0 15px
// }
.lmw{
  background: #fff;
  border-radius: 5rpx;
  border:	#D8D8D8	 ;
  margin: 25rpx;
}

.tx{
width: 20rpx;
height: 20rpx;
border-radius:90rpx;
background-color: #33FF99;
position: absolute;

}
.pageHeght{
font-size: 28rpx;
font-weight:700;
color: #707070;
}
.pingyi{
  transform: translate(-50%,0%);
}
.ui-tabs{
  background-color: #f5f5f5;
  padding-bottom: 1px;
}
.content {
  line-height: 180px;
}

</style>